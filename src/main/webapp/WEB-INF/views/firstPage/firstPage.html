[@override name="title" ]网站首页管理[/@override]
[@override name="css_or_script" ][/@override]
[@override name="content"]
 		<div class="page-content">
			<div class="panel">
				<div class="panel-heading">
				banner图添加
				</div>
				<div class="form-inline">
                        <div class="form-group" style="margin-left: 20px;margin-top: 10px;">
                        <a class="btn-file" href="javascript:void(0);">
                        <span><i class="fa fa-pic"></i>&nbsp;上传banner图</span>
                        <input type="file" name="file" multiple="true" data-url="${base}/bannerController/banner/banneradd" >
                    </a>
                    </div>
               </div>
            </div>
            </div>

        <div class="page-content">
			<div class="panel">
				<div class="panel-heading">
				banner图管理
				</div>
				<div class="panel-body panel-state1">
                  <table class="table table-striped table-hover table-lg">
                    <tbody>
                    <tr>
                    <th>banner名称</th>
                    <th>来源地址</th>
                    <th>预览</th>
                    <th>操作</th>
                    </tr>
                     [#list banners as banners]
                    <tr>
                        <td>${banners.name}</td>
                        <td>http://${pictureUrl}/${banners.link}${picLastList}</td>
                        <td><img src="http://${pictureUrl}/${banners.link}${picLastList}" height="200" width="200" alt="${banners.name}" title="${banners.name}" /></td>
                        <td>[#if banners.status==0]<input type="button" class="btn btn-blue" btn-id="${banners.id}" onclick="bannerCreat($(this).attr('btn-id'))" value="发布">[/#if]
                         [#if banners.status==1]<input type="button" class="btn btn-blue" btn-id="${banners.id}" onclick="bannerCanel($(this).attr('btn-id'))" value="取消发布">[/#if]
                        <input type="button" btn-id="${banners.id}" class="btn btn-blue" btn-id="${banners.id}" onclick="bannerDelete($(this).attr('btn-id'))" value="删除"></td>
                        
                    </tr> 
                    [/#list]
                   </tbody>
                </table>  
                 </div>   
			</div>		
		</div>			
		
		<div class="page-content">
           <div class="panel">
               <div class="panel-heading">
                合作伙伴添加
               </div>
               <div class="form-inline" style="margin-top: 10px;">
                        <div class="form-group">
                            <label for="buildingNo" class="text-right" style="margin-left: 20px;">合作单位：<font color="red"
                                                                                style="margin: 10px">*</font></label>
                               <input type="text" placeholder="合作单位名称" id="partnersname" maxlength="15"
                                   class="form-control" value="">                                                  
                        </div>
                         <div class="form-group">
                            <label for="" class="text-right">跳转地址：<font color="red"
                                                                                style="margin: 10px">*</font></label>
                               <input type="text" placeholder="来源地址" id="partnerslink"  maxlength="200"
                                   class="form-control"  value="">                                                  
                        </div>
                         <div class="form-group">
                            <input type="button" class="btn btn-blue" id="summit" value="提交" onclick="partnersSummit()">                                                
                        </div>
               </div>
        </div>
         <div class="page-content">
			<div class="panel">
				<div class="panel-heading">
				合作单位管理
				</div>
				<div class="panel-body panel-state1">
                  <table class="table table-striped table-hover table-lg">
                    <tbody>
                    <tr>
                    <th>序号</th>
                    <th>合作单位名称</th>
                    <th>跳转地址</th>
                    <th>操作</th>
                    </tr>
                     [#list partners as partners]
                    <tr>
                        <td>${partners.id}</td>
                        <td><input type="text"class="form-control" id="partnersname_${partners.id}" max="200" min="1" value="${partners.name}" /></td>
                        <td><input type="text" class="form-control" id="partnerslink_${partners.id}"  max="200" min="1"value="${partners.link}"></td>
                        <td>[#if partners.status==0]<input type="button" class="btn btn-blue" btn-id="${partners.id}" onclick="partnersCreat($(this).attr('btn-id'))" value="发布">[/#if]
                         [#if partners.status==1]<input type="button" class="btn btn-blue" btn-id="${partners.id}" onclick="partnersCanel($(this).attr('btn-id'))" value="取消发布">[/#if]
                        <input type="button" btn-id="${partners.id}"  class="btn btn-blue" btn-id="${partners.id}" onclick="partnersUpdate($(this).attr('btn-id'))" value="保存">
                        <input type="button" btn-id="${partners.id}" class="btn btn-blue" btn-id="${partners.id}" onclick="partnersrDelete($(this).attr('btn-id'))" value="删除"></td>
                        
                    </tr> 
                    [/#list]
                   </tbody>
                </table>  
                 </div>   
			</div>		
		</div>			

 		<div class="page-content" >
			<div class="panel">
				<div class="panel-heading">
				24小时服务热线
				</div>
				<div class="form-inline" style="margin-top: 10px;">
                        <div class="form-group">
                            <label for="" class="text-right" style="margin-left: 20px;">联系人姓名：<font color="red"
                                                                                style="margin: 10px">*</font></label>
                               <input type="text" placeholder="输入联系人姓名" id="servicehotlinesname" maxlength="15"
                                   class="form-control "  value="${servicehotlines.name}">                                                  
                        </div>
                         <div class="form-group">
                            <label for="" class="text-right">服务热线：<font color="red"
                                                                                style="margin: 10px">*</font></label>
                               <input type="text" placeholder="填入24小时服务热线" id="phone"  maxlength="200"
                                   class="form-control" name="phone" value="${servicehotlines.phone}">                                                  
                        </div>
                        <div class="form-group">
                        [#if servicehotlines.id!=""]
                        <input type="button" class="btn btn-blue" btn-id="${servicehotlines.id}"  onclick="serviceHotLineUpdate($(this).attr('btn-id'))" value="保存">
                        [#else]
                         <input type="button" class="btn btn-blue" onclick="serviceHotLineCreate()" value="保存">
                         [/#if]
                        </div>
                    
               </div>
            </div>
            </div>
           <div class="page-content">
			<div class="panel">
				<div class="panel-heading">
				联系地址
				</div>
				<div class="form-inline" style="margin-top: 10px;margin-bottom: 20px;">
                        <div class="form-group">
                            <label for="" class="text-right" style="margin-left: 20px;">联系地址：<font color="red"
                                                                                style="margin: 10px">*</font></label>
                               <input type="text" placeholder="输入联系地址" id="addressname" maxlength="15"
                                   class="form-control "  value="${serviceadderss.name}">                                                  
                        </div>
                        <div class="form-group">
                        [#if serviceadderss.id!=""]
                        <input type="button" class="btn btn-blue" btn-id="${serviceadderss.id}"  onclick="serviceAddressUpdate($(this).attr('btn-id'))" value="保存">
                        [#else]
                         <input type="button" class="btn btn-blue" onclick="serviceAddressCreate()" value="保存">
                         [/#if]
                        </div>
                    
               </div>
            </div>
            </div>
<div class="modal fade" id="uploadprocess" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    上传进度
                </h4>
            </div>
            <div class="modal-body">
                <div class="progress">
                    <div class="progress-bar" role="progressbar" aria-valuenow="60"
                         aria-valuemin="0" aria-valuemax="100" id="processbar">
                        <span id="processbartxt">0% 完成</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
</div>
<script type="text/javascript">
var gcount = 0;
$('[name="file"]').fileupload({
    dataType: "json",
    done: function (e, data) {
        if (data.result.success == 'ok') {
        	 window.location.reload();
            gcount--;
            if (gcount == 0) {
                $('#uploadprocess').modal('hide');
            }
        }
    },
    progressall: function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        if (progress <= 99) {
            $('#processbar').css('width', progress + '%');
            $('#processbartxt').text(progress + '%');
        } else {
            $('#processbar').css('width', '99%');
            $('#processbartxt').text('99%');
        }
    },
    add: function (e, data) {
        for (var f in data.originalFiles) {
            if (data.originalFiles[f]['size'] > 1024 * 1024 * 40) {
                alert(data.originalFiles[f]['name'] + '图片太大无法上传！');
                return;
            }
        }
        if ($('#uploadprocess').css('display') == 'none') {
            $('#uploadprocess').modal('show');
            //50秒强制关闭模态框
            setTimeout(function () {
                if ($('#uploadprocess').css('display') != 'none') {
                    $('#uploadprocess').modal('hide');
                }
            }, 5000);
        }
        gcount++;
        data.submit();
    }
});

  
  function bannerCreat(id)
  {   
	  $.ajax({
		  type:"post",
		  url:"${base}/bannerController/banner/bannercreate",
		  data:{ id:id,name:$("#name_"+id).val(),link:$("#link_"+id).val(),jumpLink:$("#jumpLink_"+id).val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()  
			}
		  }
	  })
  }
  function  bannerCanel(id)
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/bannerController/banner/bannercanel",
		  data:{id:id},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  
  function bannerDelete(id)
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/bannerController/banner/bannerdelete",
		  data:{ id:id},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  
  function partnersSummit()
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/partnersController/partners/partnerssummit",
		  data:{name:$("#partnersname").val(),link:$("#partnerslink").val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  
  function partnersCreat(id)
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/partnersController/partners/partnerscreate",
		  data:{id:id,name:$("#partnersname_"+id).val(),link:$("#partnerslink_"+id).val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  function partnersCanel(id)
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/partnersController/partners/partnerscanel",
		  data:{id:id,name:$("#partnersname_"+id).val(),link:$("#partnerslink_"+id).val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  function partnersUpdate(id)
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/partnersController/partners/partnersupdate",
		  data:{id:id,name:$("#partnersname_"+id).val(),link:$("#partnerslink_"+id).val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  function partnersrDelete(id)
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/partnersController/partners/partnersdelete",
		  data:{id:id},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  
  function serviceHotLineCreate()
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/servicehotlineController/servicehotline/servicehotlinecreate",
		  data:{name:$("#servicehotlinesname").val(),phone:$("#phone").val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  function serviceHotLineUpdate(id)
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/servicehotlineController/servicehotline/servicehotlineupdate",
		  data:{id:id,name:$("#servicehotlinesname").val(),phone:$("#phone").val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }
  function serviceAddressCreate()
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/servicehotlineController/servicehotline/serviceaddresscreate",
		  data:{name:$("#addressname").val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  }	  
function serviceAddressUpdate(id)
  {
	  $.ajax({
		  type:"post",
		  url:"${base}/servicehotlineController/servicehotline/servicehotlineupdate",
		  data:{id:id,name:$("#addressname").val()},
		  success:function(data)
		  {
			  if(data.success=="ok")
			{
				  window.location.reload()
			}
		  }
	  })
  } 
	  
  
</script>
[/@override]
[@extends name="views/base.html"/]

